**Step 1: proto 파일 정의**
```protobuf
// app/src/main/proto/widget_state.proto
syntax = "proto3";

option java_package = "com.example.widget";
option java_multiple_files = true;

message WidgetState {
    string title = 1;
    int32 counter = 2;
    repeated string items = 3;
}
```

**Step 2: build.gradle.kts 설정**
```kotlin
plugins {
    id("com.google.protobuf") version "0.9.4"
}

dependencies {
    implementation("androidx.datastore:datastore:1.0.0")
    implementation("com.google.protobuf:protobuf-javalite:3.21.12")
}

protobuf {
    protoc {
        artifact = "com.google.protobuf:protoc:3.21.12"
    }
    generateProtoTasks {
        all().forEach { task ->
            task.builtins {
                create("java") {
                    option("lite")
                }
            }
        }
    }
}
```

**Step 3: StateDefinition 구현**
```kotlin
object WidgetStateDefinition : GlanceStateDefinition<WidgetState> {
    private const val DATA_STORE_FILENAME = "widget_state"

    override suspend fun getDataStore(context: Context, fileKey: String): DataStore<WidgetState> {
        return context.dataStore
    }

    override fun getLocation(context: Context, fileKey: String): File {
        return context.dataStoreFile("$DATA_STORE_FILENAME$fileKey")
    }

    private val Context.dataStore by dataStore(
        fileName = DATA_STORE_FILENAME,
        serializer = WidgetStateSerializer
    )
}

object WidgetStateSerializer : Serializer<WidgetState> {
    override val defaultValue: WidgetState = WidgetState.getDefaultInstance()

    override suspend fun readFrom(input: InputStream): WidgetState {
        return WidgetState.parseFrom(input)
    }

    override suspend fun writeTo(t: WidgetState, output: OutputStream) {
        t.writeTo(output)
    }
}

// Widget에서 사용
class ProtoWidget : GlanceAppWidget() {
    override val stateDefinition = WidgetStateDefinition

    override suspend fun provideGlance(context: Context, id: GlanceId) {
        provideContent {
            val state = currentState<WidgetState>()
            Column {
                Text("Title: ${state.title}")
                Text("Counter: ${state.counter}")
                state.itemsList.forEach { item ->
                    Text("- $item")
                }
            }
        }
    }
}
```