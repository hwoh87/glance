> [!TIP] ğŸ—£ï¸ í•µì‹¬ë‚´ìš©
Androidì˜ `AppWidgetProvider`ë¥¼ í™•ì¥í•œ í´ë˜ìŠ¤ë¡œ, ìœ„ì ¯ì˜ ì§„ì…ì  ì—­í• ì„ í•©ë‹ˆë‹¤.
>

## 1. GlanceAppWidgetReceiver ê°œìš”

```
ğŸ“± ì‹œìŠ¤í…œ (ëŸ°ì²˜/OS ì´ë²¤íŠ¸)
       â”‚
       â–¼
ğŸ“¡ GlanceAppWidgetReceiver
       â”‚  (GlanceAppWidget ì—°ê²°)
       â–¼
ğŸ§© MyGlanceWidget (GlanceAppWidget)
```

> [!NOTE] ğŸ’¬ ë°œí‘œ ì„¤ëª…
> "`GlanceAppWidgetReceiver`ëŠ” ìœ„ì ¯ì˜ **ì§„ì…ì **ì…ë‹ˆë‹¤. ì‹œìŠ¤í…œê³¼ ìš°ë¦¬ê°€ ì‘ì„±í•œ ìœ„ì ¯ ì½”ë“œë¥¼ ì—°ê²°í•˜ëŠ” ì¤‘ê°„ ë‹¤ë¦¬ ì—­í• ì„ í•©ë‹ˆë‹¤.
>
> ëŸ°ì²˜ì—ì„œ ìœ„ì ¯ì„ ì¶”ê°€í•˜ê±°ë‚˜, í¬ê¸°ë¥¼ ë³€ê²½í•˜ê±°ë‚˜, ì—…ë°ì´íŠ¸ ì‹œê°„ì´ ë˜ë©´ ì‹œìŠ¤í…œì´ ë¸Œë¡œë“œìºìŠ¤íŠ¸ë¥¼ ë³´ëƒ…ë‹ˆë‹¤. ì´ Receiverê°€ ê·¸ê±¸ ë°›ì•„ì„œ ìš°ë¦¬ê°€ ì‘ì„±í•œ `GlanceAppWidget`ìœ¼ë¡œ ì „ë‹¬í•´ì£¼ëŠ” ê±°ì£ .
>
> ì „í†µ ìœ„ì ¯ì˜ `AppWidgetProvider`ì˜ ì—­í• ì„ GlanceAppWidgetì´ í•˜ëŠ” ê²ƒ ì´ë¼ê³  ì´í•´í•˜ì‹œë©´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤.
### 1.1 í•µì‹¬ ì—­í• 
- `AppWidgetProvider`ë¥¼ ëŒ€ì²´í•˜ëŠ” **Glance ì „ìš© ë¦¬ì‹œë²„**
- ì‹œìŠ¤í…œ ë¸Œë¡œë“œìºìŠ¤íŠ¸(`APPWIDGET_UPDATE` ë“±) ìˆ˜ì‹ 
- ë‚´ë¶€ì ìœ¼ë¡œ `GlanceAppWidget.provideGlance()` ì‹¤í–‰
- ë°˜ë“œì‹œ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ì— receiver ë“±ë¡ í•„ìš”
- `glanceAppWidget` í”„ë¡œí¼í‹°ë¡œ **ì—°ê²° ëŒ€ìƒ ìœ„ì ¯ ì§€ì •**

---

## 2. ê¸°ë³¸ êµ¬í˜„

```kotlin
class MyWidgetReceiver : GlanceAppWidgetReceiver() {
    // í•„ìˆ˜: ì—°ê²°í•  GlanceAppWidget ì§€ì •
    override val glanceAppWidget: GlanceAppWidget = MyWidget()
}
```

```xml
<!-- AndroidManifest.xml -->
<receiver
    android:name=".MyWidgetReceiver"
    android:exported="true">
    <intent-filter>
        <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
    </intent-filter>
    <meta-data
        android:name="android.appwidget.provider"
        android:resource="@xml/my_widget_info" />
</receiver>
```

---

## 3. ìƒëª…ì£¼ê¸° ì½œë°± (ì„ íƒì  ì˜¤ë²„ë¼ì´ë“œ)

`GlanceAppWidgetReceiver`ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ìƒëª…ì£¼ê¸° ì½œë°±ì„ ì œê³µí•©ë‹ˆë‹¤:

- **`onEnabled()`**: ì²« ë²ˆì§¸ ìœ„ì ¯ ì¶”ê°€ ì‹œ
- **`onUpdate()`**: ìœ„ì ¯ ì—…ë°ì´íŠ¸ í•„ìš” ì‹œ
- **`onDeleted()`**: ìœ„ì ¯ ì‚­ì œ ì‹œ
- **`onDisabled()`**: ë§ˆì§€ë§‰ ìœ„ì ¯ ì œê±° ì‹œ

> [!NOTE] ğŸ’¬ ë°œí‘œ ì„¤ëª…
> "ìƒëª…ì£¼ê¸° ì½œë°±ì€ ì„ íƒì ìœ¼ë¡œ ì˜¤ë²„ë¼ì´ë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
>
> - **onEnabled**: ì‚¬ìš©ìê°€ **ì²« ë²ˆì§¸ ìœ„ì ¯**ì„ í™ˆ í™”ë©´ì— ì¶”ê°€í•  ë•Œ ë”± í•œ ë²ˆ í˜¸ì¶œë©ë‹ˆë‹¤. WorkManagerë¡œ ì£¼ê¸°ì  ì—…ë°ì´íŠ¸ë¥¼ ì‹œì‘í•˜ëŠ” ìš©ë„ë¡œ ë§ì´ ì”ë‹ˆë‹¤.
>
> - **onUpdate**: ìœ„ì ¯ ì—…ë°ì´íŠ¸ê°€ í•„ìš”í•  ë•Œë§ˆë‹¤ í˜¸ì¶œë©ë‹ˆë‹¤. í•˜ì§€ë§Œ Glanceì—ì„œëŠ” ì´ê±¸ ì§ì ‘ ì˜¤ë²„ë¼ì´ë“œí•  í•„ìš”ê°€ ê±°ì˜ ì—†ìŠµë‹ˆë‹¤. Glanceê°€ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•´ì£¼ê±°ë“ ìš”.
>
> - **onDeleted**: íŠ¹ì • ìœ„ì ¯ ì¸ìŠ¤í„´ìŠ¤ê°€ ì‚­ì œë  ë•Œ í˜¸ì¶œë©ë‹ˆë‹¤. í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ì˜ ìƒíƒœ ë°ì´í„°ë¥¼ ì •ë¦¬í•˜ëŠ” ìš©ë„ì…ë‹ˆë‹¤.
>
> - **onDisabled**: **ë§ˆì§€ë§‰ ë‚¨ì€ ìœ„ì ¯**ì´ ì œê±°ë  ë•Œ í˜¸ì¶œë©ë‹ˆë‹¤. ì—¬ê¸°ì„œ WorkManagerë¥¼ ì¤‘ì§€í•˜ê±°ë‚˜ ì „ì—­ ë¦¬ì†ŒìŠ¤ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤."

**ìì„¸í•œ ìƒëª…ì£¼ê¸° ì„¤ëª…ê³¼ ì˜ˆì œëŠ” â†’ [5. Glance ìƒëª…ì£¼ê¸° & ì—…ë°ì´íŠ¸ íŠ¸ë¦¬ê±°â­](5.%20Glance%20ìƒëª…ì£¼ê¸°%20&%20ì—…ë°ì´íŠ¸%20íŠ¸ë¦¬ê±°â­.md)** ì°¸ê³ 

---

## 4. ìë™ vs ìˆ˜ë™ ì—…ë°ì´íŠ¸

### 4.1 ìë™ìœ¼ë¡œ ì²˜ë¦¬ë˜ëŠ” ê²½ìš°

`GlanceAppWidgetReceiver`ëŠ” ì‹œìŠ¤í…œ ì´ë²¤íŠ¸ë¥¼ ë°›ì•„ ìë™ìœ¼ë¡œ `provideGlance()`ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤:

- âœ… ìœ„ì ¯ ì¶”ê°€ (onEnabled)
- âœ… ì‹œìŠ¤í…œ ì—…ë°ì´íŠ¸ ì‹œê°„ ë„ë˜ (onUpdate)
- âœ… ìœ„ì ¯ í¬ê¸° ë³€ê²½
- âœ… ìœ„ì ¯ ì‚­ì œ (onDeleted)

> [!NOTE] ğŸ’¬ ë°œí‘œ ì„¤ëª…
> "ì¤‘ìš”í•œ ì ì€ **ì‹œìŠ¤í…œ ì´ë²¤íŠ¸ëŠ” ìë™**ì´ì§€ë§Œ, **ì•± ë¡œì§ì— ì˜í•œ ì—…ë°ì´íŠ¸ëŠ” ìˆ˜ë™**ì´ë¼ëŠ” ê²ë‹ˆë‹¤.
>
> ì˜ˆë¥¼ ë“¤ì–´ ì‚¬ìš©ìê°€ ìœ„ì ¯ í¬ê¸°ë¥¼ ì¡°ì ˆí•˜ë©´ ì‹œìŠ¤í…œì´ ìë™ìœ¼ë¡œ `provideGlance()`ë¥¼ í˜¸ì¶œí•´ì„œ ìƒˆ í¬ê¸°ì— ë§ëŠ” UIë¥¼ ë‹¤ì‹œ ê·¸ë¦½ë‹ˆë‹¤. ì´ê±´ ìš°ë¦¬ê°€ ì‹ ê²½ ì“¸ í•„ìš”ê°€ ì—†ì–´ìš”.
>
> í•˜ì§€ë§Œ ì•±ì—ì„œ 'ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ë°›ì•˜ìœ¼ë‹ˆ ìœ„ì ¯ì„ ê°±ì‹ í•´ì•¼ì§€'ë¼ê³  íŒë‹¨í•˜ëŠ” ê±´ ì‹œìŠ¤í…œì´ ì•Œ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì´ëŸ´ ë•ŒëŠ” ëª…ì‹œì ìœ¼ë¡œ `update()`ë¥¼ í˜¸ì¶œí•´ì•¼ í•©ë‹ˆë‹¤."

### 4.2 ìˆ˜ë™ ì—…ë°ì´íŠ¸ê°€ í•„ìš”í•œ ê²½ìš°

**ì•± ë¡œì§ì— ì˜í•œ ë°ì´í„° ë³€ê²½**ì€ ìˆ˜ë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë¥¼ í˜¸ì¶œí•´ì•¼ í•©ë‹ˆë‹¤:

- âœ… WorkManager ì‘ì—… ì™„ë£Œ í›„ ë°ì´í„° ê°±ì‹ 
- âœ… ì™¸ë¶€ ë¸Œë¡œë“œìºìŠ¤íŠ¸ ìˆ˜ì‹  (ì•ŒëŒ, ë°°í„°ë¦¬ ìƒíƒœ ë³€ê²½ ë“±)
- âœ… ì•± ë‚´ë¶€ ë°ì´í„°ë² ì´ìŠ¤ ë³€ê²½
- âœ… ë„¤íŠ¸ì›Œí¬ API ì‘ë‹µ ìˆ˜ì‹ 
- âœ… ì‚¬ìš©ìê°€ ì•±ì—ì„œ ì„¤ì • ë³€ê²½

```kotlin
// ì˜ˆ: WorkManagerì—ì„œ ë°ì´í„° ë¡œë“œ í›„
class DataSyncWorker(context: Context, params: WorkerParameters) : CoroutineWorker(context, params) {
    override suspend fun doWork(): Result {
        // 1. ë°ì´í„° ë¡œë“œ
        val newData = fetchDataFromServer()

        // 2. ìƒíƒœ ì €ì¥
        updateAppWidgetState(context, GlanceId(...)) { prefs ->
            prefs[dataKey] = newData
        }

        // 3. ìˆ˜ë™ìœ¼ë¡œ UI ê°±ì‹  ìš”ì²­ (í•„ìˆ˜!)
        MyWidget().updateAll(context)

        return Result.success()
    }
}
```

**ìì„¸í•œ ìˆ˜ë™ ì—…ë°ì´íŠ¸ ë°©ë²• ë° ì˜ˆì œëŠ” â†’ [5. Glance ìƒëª…ì£¼ê¸° & ì—…ë°ì´íŠ¸ íŠ¸ë¦¬ê±°â­](5.%20Glance%20ìƒëª…ì£¼ê¸°%20&%20ì—…ë°ì´íŠ¸%20íŠ¸ë¦¬ê±°â­.md)** ì°¸ê³ 

---

## 5. ì „í†µì ì¸ ë°©ì‹ê³¼ì˜ ë¹„êµ

### 4.1 ì§„ì…ì  ë°©ì‹ ì°¨ì´

**ì „í†µ ìœ„ì ¯ (AppWidgetProvider)**
```kotlin
class TraditionalWidget : AppWidgetProvider() {
    override fun onUpdate(
        context: Context,
        appWidgetManager: AppWidgetManager,
        appWidgetIds: IntArray
    ) {
        // ì§ì ‘ RemoteViews ìƒì„±
        appWidgetIds.forEach { appWidgetId ->
            val views = RemoteViews(context.packageName, R.layout.widget_layout)

            // í…ìŠ¤íŠ¸ ì„¤ì •
            views.setTextViewText(R.id.widget_text, "Hello Widget")

            // í´ë¦­ ì´ë²¤íŠ¸ ì„¤ì •
            val intent = Intent(context, MainActivity::class.java)
            val pendingIntent = PendingIntent.getActivity(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT)
            views.setOnClickPendingIntent(R.id.widget_button, pendingIntent)

            // ì—…ë°ì´íŠ¸ ì ìš©
            appWidgetManager.updateAppWidget(appWidgetId, views)
        }
    }
}
```

**Glance ìœ„ì ¯**
```kotlin
class ModernWidgetReceiver : GlanceAppWidgetReceiver() {
    // ë‹¨ìˆœíˆ ìœ„ì ¯ ì—°ê²°ë§Œ ì§€ì •
    override val glanceAppWidget: GlanceAppWidget = ModernWidget()
}

class ModernWidget : GlanceAppWidget() {
    override suspend fun provideGlance(context: Context, id: GlanceId) {
        provideContent {
            // Compose ìŠ¤íƒ€ì¼ UI
            Column {
                Text("Hello Widget")
                Button("Click", onClick = actionStartActivity<MainActivity>())
            }
        }
    }
}
```

### 4.2 ë¹„êµ í‘œ

| **êµ¬ë¶„**      | **ì „í†µ ìœ„ì ¯**                    | **Glance ìœ„ì ¯**                        |
| ----------- | ---------------------------- | ------------------------------------ |
| **í´ë˜ìŠ¤**     | `AppWidgetProvider`          | `GlanceAppWidgetReceiver`            |
| **UI ì‘ì„±**   | XML + `RemoteViews` ìˆ˜ë™ ì¡°ì‘    | Compose DSL (ìë™ `RemoteViews` ë³€í™˜)    |
| **UI ì—…ë°ì´íŠ¸** | `updateAppWidget()` ì§ì ‘ í˜¸ì¶œ    | `update()` / `updateAll()`           |
| **ìƒíƒœ ê´€ë¦¬**   | `SharedPreferences`/DB ì§ì ‘ êµ¬í˜„ | DataStore ê¸°ë°˜ `StateDefinition` ê¸°ë³¸ ì œê³µ |
| **ê°œë°œ ê²½í—˜**   | ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ë§ìŒ                   | ê°„ê²°, Compose ì¹œí™”ì                       |
| **ì§„ì…ì **     | `onUpdate()` ë©”ì„œë“œ             | `glanceAppWidget` í”„ë¡œí¼í‹°               |
| **ì¸ìŠ¤í„´ìŠ¤ ê´€ë¦¬** | `appWidgetIds` ë°°ì—´ë¡œ ì§ì ‘ ë°˜ë³µ     | `GlanceId` ìë™ ê´€ë¦¬                     |

---

## 6. ì£¼ì˜ì‚¬í•­

### 6.1 `super` í˜¸ì¶œ í•„ìˆ˜
ëª¨ë“  ìƒëª…ì£¼ê¸° ì½œë°±ì—ì„œ `super` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ì•¼ í•©ë‹ˆë‹¤. Glanceì˜ ë‚´ë¶€ ë¡œì§ì´ ì‹¤í–‰ë˜ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

```kotlin
// âŒ ì˜ëª»ëœ ì˜ˆ
override fun onUpdate(
    context: Context,
    appWidgetManager: AppWidgetManager,
    appWidgetIds: IntArray
) {
    // super í˜¸ì¶œ ì—†ìŒ â†’ ìœ„ì ¯ì´ ì—…ë°ì´íŠ¸ë˜ì§€ ì•ŠìŒ!
}

// âœ… ì˜¬ë°”ë¥¸ ì˜ˆ
override fun onUpdate(
    context: Context,
    appWidgetManager: AppWidgetManager,
    appWidgetIds: IntArray
) {
    super.onUpdate(context, appWidgetManager, appWidgetIds)
    // ì¶”ê°€ ë¡œì§...
}
```

### 6.2 ë§¤ë‹ˆí˜ìŠ¤íŠ¸ ë“±ë¡ í™•ì¸
`GlanceAppWidgetReceiver`ë¥¼ ìƒì†í•œ í´ë˜ìŠ¤ëŠ” ë°˜ë“œì‹œ `AndroidManifest.xml`ì— ë“±ë¡í•´ì•¼ í•©ë‹ˆë‹¤.

```xml
<receiver
    android:name=".YourWidgetReceiver"
    android:exported="true">  <!-- exported="true" í•„ìˆ˜ -->
    <intent-filter>
        <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
    </intent-filter>
    <meta-data
        android:name="android.appwidget.provider"
        android:resource="@xml/your_widget_info" />
</receiver>
```

### 6.3 `onUpdate()` ì§ì ‘ êµ¬í˜„ ì§€ì–‘
ì¼ë°˜ì ìœ¼ë¡œ `onUpdate()`ë¥¼ ì§ì ‘ ì˜¤ë²„ë¼ì´ë“œí•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. `GlanceAppWidgetReceiver`ê°€ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.

---

## 7. ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] `GlanceAppWidgetReceiver` ìƒì†í•œ í´ë˜ìŠ¤ ì‘ì„±
- [ ] `glanceAppWidget` í”„ë¡œí¼í‹°ë¡œ ìœ„ì ¯ ì—°ê²°
- [ ] `AndroidManifest.xml`ì— receiver ë“±ë¡
- [ ] `exported="true"` ì„¤ì • í™•ì¸
- [ ] ìƒëª…ì£¼ê¸° ì½œë°±ì—ì„œ `super` í˜¸ì¶œ í™•ì¸
- [ ] `onEnabled`/`onDisabled`ì—ì„œ ì „ì—­ ë¦¬ì†ŒìŠ¤ ê´€ë¦¬ (í•„ìš” ì‹œ)
- [ ] `onDeleted`ì—ì„œ ìœ„ì ¯ë³„ ìƒíƒœ ì •ë¦¬ (í•„ìš” ì‹œ)

---
