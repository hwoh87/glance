> [!TIP] ğŸ—£ï¸ í•µì‹¬ë‚´ìš©
ì‹¤ì œ ìœ„ì ¯ì˜ UIì™€ ë™ì‘ì„ ì •ì˜í•˜ëŠ” í•µì‹¬ í´ë˜ìŠ¤ì…ë‹ˆë‹¤. `provideGlance()` í•¨ìˆ˜ì—ì„œ ìœ„ì ¯ ì»¨í…ì¸ ë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤.
>

## 1. GlanceAppWidgetì´ë€?

`GlanceAppWidget`ì€ ê¸°ì¡´ í™ˆ í™”ë©´ ìœ„ì ¯(`AppWidget`)ì„ **ComposeìŠ¤ëŸ¬ìš´ DSL**ë¡œ ì‘ì„±í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” Jetpack ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ í•µì‹¬ ë² ì´ìŠ¤ í´ë˜ìŠ¤ì…ë‹ˆë‹¤.

### 1.1 í•µì‹¬ ê°œë…
- ìœ„ì ¯ ê°œë°œì˜ **ì§„ì…ì **
- í™”ë©´ì—ëŠ” Composeê°€ ì§ì ‘ ê·¸ë ¤ì§€ëŠ” ê²Œ ì•„ë‹ˆë¼, Glance DSL â†’ **`RemoteViews`**ë¡œ ë³€í™˜ë˜ì–´ **`AppWidget`** ì‹œìŠ¤í…œ ìœ„ì—ì„œ ë™ì‘
- **ëª©ì **: `RemoteViews`ì˜ ì œì•½(í˜¸í™˜ì„±/í‘œí˜„ë ¥/ê°œë°œ í¸ì˜)ì„ ì™„í™”í•˜ê³ , ì„ ì–¸ì  DSLë¡œ **ê°„ê²°í•˜ê³  ì•ˆì „**í•˜ê²Œ ìœ„ì ¯ì„ ì‘ì„±

---

## 2. ê¸°ë³¸ í…œí”Œë¦¿

```kotlin
class MyWidget : GlanceAppWidget() {
    // 1. ìƒíƒœ ì €ì¥ ë°©ì‹ ì •ì˜
    override val stateDefinition = PreferencesGlanceStateDefinition

    // 2. í¬ê¸° ëŒ€ì‘ ì „ëµ ì •ì˜
    override val sizeMode = SizeMode.Responsive(
        setOf(
            DpSize(180.dp, 110.dp),
            DpSize(250.dp, 150.dp)
        )
    )

    // 3. UI ì œê³µ ë©”ì„œë“œ
    override suspend fun provideGlance(context: Context, id: GlanceId) {
        provideContent {
            WidgetContent()
        }
    }

    // 4. ì‹¤ì œ UI êµ¬ì„±
    @Composable
    private fun WidgetContent() {
        val prefs = currentState<Preferences>()
        val count = prefs[intPreferencesKey("count")] ?: 0

        Column(
            modifier = GlanceModifier.fillMaxSize().padding(16.dp),
            verticalAlignment = Alignment.CenterVertically,
            horizontalAlignment = Alignment.CenterHorizontally
        ) {
            Text(
                text = "Count: $count",
                style = TextStyle(fontSize = 20.sp, fontWeight = FontWeight.Bold)
            )
            Button(
                text = "Increment",
                onClick = actionRunCallback<IncrementAction>()
            )
        }
    }
}
```

> [!NOTE] ğŸ’¬ ë°œí‘œ ì„¤ëª…
> "ê¸°ë³¸ í…œí”Œë¦¿ì„ ë³´ë©´ GlanceAppWidgetì˜ êµ¬ì¡°ê°€ ëª…í™•í•©ë‹ˆë‹¤.
>
> 1. **stateDefinition**: ìœ„ì ¯ ìƒíƒœë¥¼ ì–´ë–»ê²Œ ì €ì¥í• ì§€ ì •í•©ë‹ˆë‹¤. PreferencesGlanceStateDefinitionì´ ê°€ì¥ ê°„ë‹¨í•˜ê³  ë§ì´ ì”ë‹ˆë‹¤.
>
> 2. **sizeMode**: ìœ„ì ¯ í¬ê¸°ê°€ ë³€ê²½ë  ë•Œ ì–´ë–»ê²Œ ëŒ€ì‘í• ì§€ ì •í•©ë‹ˆë‹¤. Responsiveê°€ ê¶Œì¥ ë°©ì‹ì…ë‹ˆë‹¤.
>
> 3. **provideGlance()**: ìœ„ì ¯ì´ ì—…ë°ì´íŠ¸ë  ë•Œë§ˆë‹¤ í˜¸ì¶œë©ë‹ˆë‹¤. ì—¬ê¸°ì„œ `provideContent` ë¸”ë¡ìœ¼ë¡œ UIë¥¼ ì œê³µí•˜ì£ .
>
> 4. **WidgetContent()**: ì‹¤ì œ UIë¥¼ Compose ìŠ¤íƒ€ì¼ë¡œ ì‘ì„±í•©ë‹ˆë‹¤. `currentState()`ë¡œ ìƒíƒœë¥¼ ì½ê³ , Column/Text/Button ê°™ì€ ì»´í¬ë„ŒíŠ¸ë¡œ í™”ë©´ì„ êµ¬ì„±í•©ë‹ˆë‹¤.
>
> í•µì‹¬ì€ **provideGlance()ê°€ í˜¸ì¶œë˜ëŠ” ì‹œì **ì„ ì´í•´í•˜ëŠ” ê²ë‹ˆë‹¤. ìœ„ì ¯ ì¶”ê°€, ì—…ë°ì´íŠ¸, í¬ê¸° ë³€ê²½, ìƒíƒœ ë³€ê²½ í›„ update() í˜¸ì¶œ ë“± ì—¬ëŸ¬ ìƒí™©ì—ì„œ í˜¸ì¶œë©ë‹ˆë‹¤."

---

## 3. í•µì‹¬ êµ¬ì„± ìš”ì†Œ

### 3.1 `stateDefinition`
ìœ„ì ¯ ìƒíƒœ ì €ì¥ ë°©ì‹ì„ ì •ì˜í•©ë‹ˆë‹¤.

```kotlin
// Preferences ê¸°ë°˜ (ê°„ë‹¨í•œ key-value) - ê°€ì¥ ì¼ë°˜ì 
override val stateDefinition = PreferencesGlanceStateDefinition
```

**ìƒíƒœ ê´€ë¦¬ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ â†’ [10. State ê´€ë¦¬â­](10.%20State%20ê´€ë¦¬â­.md)** ì°¸ê³ 

---

### 3.2 `sizeMode`
ìœ„ì ¯ì´ ë‹¤ì–‘í•œ í¬ê¸°ì—ì„œ ì–´ë–»ê²Œ ë™ì‘í• ì§€ ì •ì˜í•©ë‹ˆë‹¤.

```kotlin
// ë°˜ì‘í˜• (ê¶Œì¥)
override val sizeMode = SizeMode.Responsive(
    setOf(
        DpSize(180.dp, 110.dp),
        DpSize(250.dp, 150.dp)
    )
)
```

**SizeModeì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ â†’ [7. SizeMode](7.%20SizeMode.md)** ì°¸ê³ 

---

### 3.3 `provideGlance()`
ì‹œìŠ¤í…œì´ 'ìœ„ì ¯ì„ ê·¸ë ¤ë¼' í•˜ê³  í˜¸ì¶œí•  ë•Œ ì‹¤í–‰ë˜ëŠ” ë©”ì„œë“œì…ë‹ˆë‹¤.

```kotlin
override suspend fun provideGlance(context: Context, id: GlanceId) {
    // 1. í•„ìš”í•œ ë°ì´í„° ë¡œë“œ (suspend í•¨ìˆ˜ ì‚¬ìš© ê°€ëŠ¥)
    val data = loadWidgetData()

    // 2. UI ì œê³µ
    provideContent {
        WidgetUI(data)
    }
}
```

**íŠ¹ì§•**
- `suspend` í•¨ìˆ˜ë¡œ ì •ì˜ë¨ â†’ ë„¤íŠ¸ì›Œí¬/DB í˜¸ì¶œ ê°€ëŠ¥
- `context`: Android Context
- `id`: ìœ„ì ¯ ì¸ìŠ¤í„´ìŠ¤ë¥¼ êµ¬ë¶„í•˜ëŠ” ê³ ìœ  ID (`GlanceId`)

---

### 3.4 `provideContent {}`
Glance DSLë¡œ UIë¥¼ ì‘ì„±í•˜ëŠ” ë¸”ë¡ì…ë‹ˆë‹¤.

```kotlin
provideContent {
    // Glance Composable ì‚¬ìš©
    Column {
        Text("Hello")
        Button("Click", onClick = { /* ... */ })
    }
}
```

---

## 4. UI ì‘ì„± ê·œì¹™

### 4.1 ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸

**ë ˆì´ì•„ì›ƒ**
- `Column`: ì„¸ë¡œ ë°°ì¹˜
- `Row`: ê°€ë¡œ ë°°ì¹˜
- `Box`: ê²¹ì³ì„œ ë°°ì¹˜
- `Spacer`: ë¹ˆ ê³µê°„
- `LazyColumn`: ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•œ ë¦¬ìŠ¤íŠ¸ (ì œí•œì )

**UI ìš”ì†Œ**
- `Text`: í…ìŠ¤íŠ¸
- `Image`: ì´ë¯¸ì§€
- `Button`: ë²„íŠ¼
- `CheckBox`: ì²´í¬ë°•ìŠ¤
- `Switch`: ìŠ¤ìœ„ì¹˜
- `RadioButton`: ë¼ë””ì˜¤ ë²„íŠ¼

**UI ì‘ì„± ê·œì¹™ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ â†’ [6. UI ì‘ì„± ê·œì¹™ ë° ì œì•½ì‚¬í•­â­](6.%20UI%20ì‘ì„±%20ê·œì¹™%20ë°%20ì œì•½ì‚¬í•­â­.md)** ì°¸ê³ 

---

### 4.2 ë‹¨ìœ„ ì‚¬ìš©

Glanceì—ì„œëŠ” **`androidx.glance.unit.dp`**ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤ (Composeì˜ `dp`ì™€ ë‹¤ë¦„).

```kotlin
import androidx.glance.unit.dp  // âœ… Glanceì˜ dp

// âŒ ì˜ëª»ëœ ì˜ˆ
import androidx.compose.ui.unit.dp  // Composeì˜ dp (Glanceì—ì„œ ì‚¬ìš© ë¶ˆê°€)
```

---

### 4.3 ìƒíƒœ ì ‘ê·¼

`currentState<T>()`ë¡œ í˜„ì¬ ìœ„ì ¯ì˜ ìƒíƒœë¥¼ ì½ìŠµë‹ˆë‹¤.

```kotlin
@Composable
fun WidgetContent() {
    val prefs = currentState<Preferences>()
    val count = prefs[intPreferencesKey("count")] ?: 0

    Text("Count: $count")
}
```

---

## 5. RemoteViews ì œì•½ (Composeì™€ ë‹¤ë¦„)

GlanceëŠ” `RemoteViews` ê¸°ë°˜ì´ë¯€ë¡œ ë‹¤ìŒê³¼ ê°™ì€ ì œì•½ì´ ìˆìŠµë‹ˆë‹¤:

- âŒ `remember`, `LaunchedEffect` ë“± Compose ëŸ°íƒ€ì„ API ì‚¬ìš© ë¶ˆê°€
- âŒ ì• ë‹ˆë©”ì´ì…˜ ì œí•œ
- âŒ Coil/Glide ì§ì ‘ ì‚¬ìš© ë¶ˆê°€

```kotlin
// âŒ ì‚¬ìš© ë¶ˆê°€
var count by remember { mutableStateOf(0) }

// âœ… ëŒ€ì‹  StateDefinition ì‚¬ìš©
val prefs = currentState<Preferences>()
val count = prefs[intPreferencesKey("count")] ?: 0
```

**RemoteViews ì œì•½ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ â†’ [6. UI ì‘ì„± ê·œì¹™ ë° ì œì•½ì‚¬í•­â­](6.%20UI%20ì‘ì„±%20ê·œì¹™%20ë°%20ì œì•½ì‚¬í•­â­.md)** ì°¸ê³ 

---

## 6. ì‹¤ì „ ì˜ˆì œ: ë‚ ì”¨ ìœ„ì ¯

```kotlin
class WeatherWidget : GlanceAppWidget() {
    override val stateDefinition = PreferencesGlanceStateDefinition

    override val sizeMode = SizeMode.Responsive(
        setOf(
            DpSize(180.dp, 110.dp),  // ì‘ì€ í¬ê¸°
            DpSize(250.dp, 200.dp)   // í° í¬ê¸°
        )
    )

    override suspend fun provideGlance(context: Context, id: GlanceId) {
        provideContent {
            WeatherContent()
        }
    }

    @Composable
    private fun WeatherContent() {
        val prefs = currentState<Preferences>()
        val temperature = prefs[stringPreferencesKey("temperature")] ?: "N/A"
        val condition = prefs[stringPreferencesKey("condition")] ?: "Unknown"
        val size = LocalSize.current

        Column(
            modifier = GlanceModifier
                .fillMaxSize()
                .background(Color.LightGray)
                .padding(16.dp),
            verticalAlignment = Alignment.CenterVertically,
            horizontalAlignment = Alignment.CenterHorizontally
        ) {
            Text(
                text = temperature,
                style = TextStyle(
                    fontSize = if (size.width > 200.dp) 32.sp else 24.sp,
                    fontWeight = FontWeight.Bold
                )
            )
            Spacer(GlanceModifier.height(8.dp))
            Text(text = condition)

            if (size.width > 200.dp) {
                Spacer(GlanceModifier.height(16.dp))
                Button(
                    text = "Refresh",
                    onClick = actionRunCallback<RefreshWeatherAction>()
                )
            }
        }
    }
}
```

**[ìŠ¤í¬ë¦°ìƒ· ì¶”ì²œ]** ë‚ ì”¨ ìœ„ì ¯ì˜ ì‘ì€ í¬ê¸°/í° í¬ê¸° ë²„ì „

---

## 7. initialLayout í”Œë ˆì´ìŠ¤í™€ë” (í•„ìˆ˜ ì„¤ì •)

ìœ„ì ¯ì„ ì¶”ê°€í•  ë•Œ Glanceê°€ ì‹¤ì œ UIë¥¼ ë Œë”ë§í•˜ê¸° ì „ê¹Œì§€ **ì„ì‹œë¡œ ë³´ì—¬ì¤„ ë ˆì´ì•„ì›ƒ**ì„ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤.

### 7.1 í”Œë ˆì´ìŠ¤í™€ë” ì„¤ì •

```xml
<!-- res/xml/widget_info.xml -->
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
    android:initialLayout="@layout/widget_placeholder"  <!-- í•„ìˆ˜! -->
    android:minWidth="180dp"
    android:minHeight="110dp"
    android:previewImage="@drawable/widget_preview"
    android:resizeMode="horizontal|vertical"
    android:widgetCategory="home_screen" />
```

```xml
<!-- res/layout/widget_placeholder.xml -->
<TextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:text="Loading..."
    android:gravity="center"
    android:textColor="#666666"
    android:background="#FFFFFF" />
```

> [!NOTE] ğŸ’¬ ë°œí‘œ ì„¤ëª…
> "`initialLayout`ì€ **í•„ìˆ˜ ì„¤ì •**ì…ë‹ˆë‹¤. ì´ ë¦¬ì†ŒìŠ¤ê°€ ì—†ìœ¼ë©´ ìœ„ì ¯ì´ ìœ„ì ¯ ì„ íƒ í™”ë©´ì— ì•„ì˜ˆ ì•ˆ ë‚˜íƒ€ë‚  ìˆ˜ ìˆì–´ìš”.
>
> ì‚¬ìš©ìê°€ ìœ„ì ¯ì„ ì¶”ê°€í•˜ëŠ” ìˆœê°„, Glanceê°€ `provideGlance()`ë¥¼ ì‹¤í–‰í•´ì„œ ì‹¤ì œ UIë¥¼ ë§Œë“¤ê¸° ì „ê¹Œì§€ ì ê¹ ë³´ì—¬ì¤„ ì„ì‹œ í™”ë©´ì…ë‹ˆë‹¤. 'Loading...' ê°™ì€ ë‹¨ìˆœí•œ í…ìŠ¤íŠ¸ë‚˜ ë¡œê³  ì •ë„ë©´ ì¶©ë¶„í•©ë‹ˆë‹¤.
>
> ì‹¤ì œë¡œëŠ” ëª‡ ë°€ë¦¬ì´ˆ~1ì´ˆ ì •ë„ë§Œ ë³´ì´ì§€ë§Œ, ì´ íŒŒì¼ ìì²´ê°€ ì—†ìœ¼ë©´ ì‹œìŠ¤í…œì´ ìœ„ì ¯ì„ ì¸ì‹í•˜ì§€ ëª»í•©ë‹ˆë‹¤."

### 7.2 ì£¼ì˜ì‚¬í•­

- âœ… **ë°˜ë“œì‹œ ìƒì„±**: XML ë ˆì´ì•„ì›ƒ íŒŒì¼ì´ ì‹¤ì œë¡œ ì¡´ì¬í•´ì•¼ í•¨
- âœ… **ë‹¨ìˆœí•˜ê²Œ**: TextView í•˜ë‚˜ ì •ë„ë¡œ ì¶©ë¶„
- âœ… **ë¹ ë¥¸ ë¡œë”©**: ë¬´ê±°ìš´ ë ˆì´ì•„ì›ƒ í”¼í•˜ê¸°
- âš ï¸ **ë¯¸ë…¸ì¶œ ìœ„í—˜**: ì—†ìœ¼ë©´ ìœ„ì ¯ ëª©ë¡ì— ì•ˆ ëœ° ìˆ˜ ìˆìŒ

---

## 8. Glance ë™ì‘ ì›ë¦¬

### 8.1 ë Œë”ë§ íë¦„

```
ğŸ“± ì‚¬ìš©ìê°€ ìœ„ì ¯ ì¶”ê°€
   â†“
ğŸ“‘ initialLayout ì¦‰ì‹œ í‘œì‹œ (í”Œë ˆì´ìŠ¤í™€ë”)
   â†“
ğŸ“¡ GlanceAppWidgetReceiver í˜¸ì¶œ
   â†“
ğŸ§© provideGlance() ì‹¤í–‰
   â†“
ğŸ¨ provideContent { } - Glance DSL ì‘ì„±
   â†“
ğŸ”„ Glance ì—”ì§„ì´ ìë™ìœ¼ë¡œ RemoteViews ë³€í™˜
   â†“
âœ… ì‹¤ì œ ìœ„ì ¯ UI í‘œì‹œ
```

### 8.2 í•µì‹¬ í¬ì¸íŠ¸

- **ì„ ì–¸í˜• UI**: ê°œë°œìëŠ” DSLë§Œ ì‘ì„±
- **ìë™ ë³€í™˜**: Glanceê°€ RemoteViewsë¡œ ë³€í™˜
- **RemoteViews ê¸°ë°˜**: ë”°ë¼ì„œ ì œì•½ì‚¬í•­ ì¡´ì¬ (â†’ [6. UI ì‘ì„± ê·œì¹™](4.ì„¸ë¯¸ë‚˜/Glance/6.%20UI%20ì‘ì„±%20ê·œì¹™%20ë°%20ì œì•½ì‚¬í•­â­â­.md) ì°¸ê³ )

---

## 9. ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] `GlanceAppWidget` ìƒì†í•œ í´ë˜ìŠ¤ ì‘ì„±
- [ ] `stateDefinition` ì •ì˜ (Preferences ë˜ëŠ” Proto)
- [ ] `sizeMode` ì •ì˜ (ëŒ€ë¶€ë¶„ Responsive ê¶Œì¥)
- [ ] `provideGlance()` êµ¬í˜„
- [ ] `provideContent {}` ë‚´ë¶€ì— Glance Composable ì‘ì„±
- [ ] **`initialLayout` XML íŒŒì¼ ìƒì„±** (í•„ìˆ˜!)
- [ ] Glanceì˜ `dp` ì‚¬ìš© í™•ì¸ (`androidx.glance.unit.dp`)
- [ ] Compose ëŸ°íƒ€ì„ API ì‚¬ìš©í•˜ì§€ ì•Šì•˜ëŠ”ì§€ í™•ì¸
- [ ] `currentState<T>()`ë¡œ ìƒíƒœ ì ‘ê·¼

---

---
