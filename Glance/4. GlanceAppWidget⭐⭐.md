> [!TIP] ğŸ—£ï¸ í•µì‹¬ë‚´ìš©
ì‹¤ì œ ìœ„ì ¯ì˜ UIì™€ ë™ì‘ì„ ì •ì˜í•˜ëŠ” í•µì‹¬ í´ë˜ìŠ¤ì…ë‹ˆë‹¤. `provideGlance()` í•¨ìˆ˜ì—ì„œ ìœ„ì ¯ ì»¨í…ì¸ ë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤.
>

## 1. GlanceAppWidgetì´ë€?

`GlanceAppWidget`ì€ ê¸°ì¡´ í™ˆ í™”ë©´ ìœ„ì ¯(`AppWidget`)ì„ **ComposeìŠ¤ëŸ¬ìš´ DSL**ë¡œ ì‘ì„±í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” Jetpack ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ í•µì‹¬ ë² ì´ìŠ¤ í´ë˜ìŠ¤ì…ë‹ˆë‹¤.

### 1.1 í•µì‹¬ ê°œë…
- ìœ„ì ¯ ê°œë°œì˜ **ì§„ì…ì **
- í™”ë©´ì—ëŠ” Composeê°€ ì§ì ‘ ê·¸ë ¤ì§€ëŠ” ê²Œ ì•„ë‹ˆë¼, Glance DSL â†’ **`RemoteViews`**ë¡œ ë³€í™˜ë˜ì–´ **`AppWidget`** ì‹œìŠ¤í…œ ìœ„ì—ì„œ ë™ì‘
- **ëª©ì **: `RemoteViews`ì˜ ì œì•½(í˜¸í™˜ì„±/í‘œí˜„ë ¥/ê°œë°œ í¸ì˜)ì„ ì™„í™”í•˜ê³ , ì„ ì–¸ì  DSLë¡œ **ê°„ê²°í•˜ê³  ì•ˆì „**í•˜ê²Œ ìœ„ì ¯ì„ ì‘ì„±

---

## 2. ê¸°ë³¸ í…œí”Œë¦¿

```kotlin
class MyWidget : GlanceAppWidget() {
    // 1. ìƒíƒœ ì €ì¥ ë°©ì‹ ì •ì˜
    override val stateDefinition = PreferencesGlanceStateDefinition

    // 2. í¬ê¸° ëŒ€ì‘ ì „ëµ ì •ì˜
    override val sizeMode = SizeMode.Responsive(
        setOf(
            DpSize(180.dp, 110.dp),
            DpSize(250.dp, 150.dp)
        )
    )

    // 3. UI ì œê³µ ë©”ì„œë“œ
    override suspend fun provideGlance(context: Context, id: GlanceId) {
        provideContent {
            WidgetContent()
        }
    }

    // 4. ì‹¤ì œ UI êµ¬ì„±
    @Composable
    private fun WidgetContent() {
        val prefs = currentState<Preferences>()
        val count = prefs[intPreferencesKey("count")] ?: 0

        Column(
            modifier = GlanceModifier.fillMaxSize().padding(16.dp),
            verticalAlignment = Alignment.CenterVertically,
            horizontalAlignment = Alignment.CenterHorizontally
        ) {
            Text(
                text = "Count: $count",
                style = TextStyle(fontSize = 20.sp, fontWeight = FontWeight.Bold)
            )
            Button(
                text = "Increment",
                onClick = actionRunCallback<IncrementAction>()
            )
        }
    }
}
```

> [!NOTE] ğŸ’¬ ë°œí‘œ ì„¤ëª…
> "ê¸°ë³¸ í…œí”Œë¦¿ì„ ë³´ë©´ GlanceAppWidgetì˜ êµ¬ì¡°ê°€ ëª…í™•í•©ë‹ˆë‹¤.
>
> 1. **stateDefinition**: ìœ„ì ¯ ìƒíƒœë¥¼ ì–´ë–»ê²Œ ì €ì¥í• ì§€ ì •í•©ë‹ˆë‹¤. PreferencesGlanceStateDefinitionì´ ê°€ì¥ ê°„ë‹¨í•˜ê³  ë§ì´ ì”ë‹ˆë‹¤.
>
> 2. **sizeMode**: ìœ„ì ¯ í¬ê¸°ê°€ ë³€ê²½ë  ë•Œ ì–´ë–»ê²Œ ëŒ€ì‘í• ì§€ ì •í•©ë‹ˆë‹¤. Responsiveê°€ ê¶Œì¥ ë°©ì‹ì…ë‹ˆë‹¤.
>
> 3. **provideGlance()**: ìœ„ì ¯ì´ ì—…ë°ì´íŠ¸ë  ë•Œë§ˆë‹¤ í˜¸ì¶œë©ë‹ˆë‹¤. ì—¬ê¸°ì„œ `provideContent` ë¸”ë¡ìœ¼ë¡œ UIë¥¼ ì œê³µí•˜ì£ .
>
> 4. **WidgetContent()**: ì‹¤ì œ UIë¥¼ Compose ìŠ¤íƒ€ì¼ë¡œ ì‘ì„±í•©ë‹ˆë‹¤. `currentState()`ë¡œ ìƒíƒœë¥¼ ì½ê³ , Column/Text/Button ê°™ì€ ì»´í¬ë„ŒíŠ¸ë¡œ í™”ë©´ì„ êµ¬ì„±í•©ë‹ˆë‹¤.
>
> í•µì‹¬ì€ **provideGlance()ê°€ í˜¸ì¶œë˜ëŠ” ì‹œì **ì„ ì´í•´í•˜ëŠ” ê²ë‹ˆë‹¤. ìœ„ì ¯ ì¶”ê°€, ì—…ë°ì´íŠ¸, í¬ê¸° ë³€ê²½, ìƒíƒœ ë³€ê²½ í›„ update() í˜¸ì¶œ ë“± ì—¬ëŸ¬ ìƒí™©ì—ì„œ í˜¸ì¶œë©ë‹ˆë‹¤."

---

## 3. í•µì‹¬ êµ¬ì„± ìš”ì†Œ

### 3.1 `stateDefinition`
ìœ„ì ¯ ìƒíƒœ ì €ì¥ ë°©ì‹ì„ ì •ì˜í•©ë‹ˆë‹¤.

```kotlin
// Preferences ê¸°ë°˜ (ê°„ë‹¨í•œ key-value) - ê°€ì¥ ì¼ë°˜ì 
override val stateDefinition = PreferencesGlanceStateDefinition
```

**ìƒíƒœ ê´€ë¦¬ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ â†’ [10. State ê´€ë¦¬â­](10.%20State%20ê´€ë¦¬â­.md)** ì°¸ê³ 

---

### 3.2 `sizeMode`
ìœ„ì ¯ì´ ë‹¤ì–‘í•œ í¬ê¸°ì—ì„œ ì–´ë–»ê²Œ ë™ì‘í• ì§€ ì •ì˜í•©ë‹ˆë‹¤.

```kotlin
// ë°˜ì‘í˜• (ê¶Œì¥)
override val sizeMode = SizeMode.Responsive(
    setOf(
        DpSize(180.dp, 110.dp),
        DpSize(250.dp, 150.dp)
    )
)
```

**SizeModeì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ â†’ [7. SizeMode](7.%20SizeMode.md)** ì°¸ê³ 

---

### 3.3 `provideGlance()`
ì‹œìŠ¤í…œì´ 'ìœ„ì ¯ì„ ê·¸ë ¤ë¼' í•˜ê³  í˜¸ì¶œí•  ë•Œ ì‹¤í–‰ë˜ëŠ” ë©”ì„œë“œì…ë‹ˆë‹¤.

```kotlin
override suspend fun provideGlance(context: Context, id: GlanceId) {
    // âš ï¸ ì£¼ì˜: provideContent ì™¸ë¶€ì—ì„œ ê°€ë²¼ìš´ ì¤€ë¹„ ì‘ì—…ë§Œ
    // ë¬´ê±°ìš´ I/OëŠ” Workerë¡œ ë¶„ë¦¬ í•„ìš”

    provideContent {
        // âœ… DataStoreì—ì„œ ìƒíƒœ ì½ê¸°ë§Œ
        val prefs = currentState<Preferences>()
        val data = prefs[dataKey] ?: "ê¸°ë³¸ê°’"

        WidgetUI(data)
    }
}
```

**íŠ¹ì§•**
- `suspend` í•¨ìˆ˜ë¡œ ì •ì˜ë˜ì§€ë§Œ **ë¬´ê±°ìš´ I/OëŠ” ê¸ˆì§€**
- `context`: Android Context
- `id`: ìœ„ì ¯ ì¸ìŠ¤í„´ìŠ¤ë¥¼ êµ¬ë¶„í•˜ëŠ” ê³ ìœ  ID (`GlanceId`)

---

### 3.4 `provideContent {}` - UI ì„ ì–¸ ì „ìš© êµ¬ê°„

#### 3.4.1 ê¸°ë³¸ ì‚¬ìš©ë²•

Glance DSLë¡œ UIë¥¼ ì‘ì„±í•˜ëŠ” ë¸”ë¡ì…ë‹ˆë‹¤. **RemoteViewsë¡œ ë³€í™˜ë  UI íŠ¸ë¦¬ë§Œ ì„ ì–¸**í•˜ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤.

```kotlin
provideContent {
    // Glance Composable ì‚¬ìš©
    Column {
        Text("Hello")
        Button("Click", onClick = { /* ... */ })
    }
}
```

#### 3.4.2 âš ï¸ ì¤‘ìš”: provideContentì—ì„œ ë„¤íŠ¸ì›Œí¬ í˜¸ì¶œ ê¸ˆì§€

> [!WARNING] ì™œ provideContentì—ì„œ ë„¤íŠ¸ì›Œí¬/I/Oë¥¼ í•˜ë©´ ì•ˆ ë˜ë‚˜ìš”?
>
> **1. RemoteViews ë³€í™˜ êµ¬ê°„ì˜ íŠ¹ì„±**
> - `provideContent`ëŠ” **"RemoteViewsë¡œ ë³€í™˜ë  UI íŠ¸ë¦¬ë§Œ ì„ ì–¸"**í•˜ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤.
> - Compose ëŸ°íƒ€ì„ ê¸°ëŠ¥(`remember`, `LaunchedEffect`, ì½”ë£¨í‹´ ì»¨í…ìŠ¤íŠ¸)ì´ ë™ì‘í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
> - UI ì„ ì–¸ ì¤‘ì— ë¸”ë¡œí‚¹/I/Oê°€ ë¼ë©´ **ë Œë”ë§ ì‹¤íŒ¨ ë˜ëŠ” ì§€ì—°**ì´ ë°œìƒí•©ë‹ˆë‹¤.
>
> **2. í”„ë¡œì„¸ìŠ¤ ì œì•½**
> - ìœ„ì ¯ì€ **ëŸ°ì²˜ í”„ë¡œì„¸ìŠ¤ì™€ IPCë¡œ ê·¸ë ¤ì§€ëŠ”** ë³„ë„ í”„ë¡œì„¸ìŠ¤/ìŠ¤ë ˆë“œ í™˜ê²½ì…ë‹ˆë‹¤.
> - ì´ í™˜ê²½ì—ì„œ ë„¤íŠ¸ì›Œí¬/DB í˜¸ì¶œì€ **ì•ˆì •ì ì´ì§€ ì•Šê³ **, ANR(Application Not Responding) ìœ„í—˜ì´ ìˆìŠµë‹ˆë‹¤.
>
> **3. ì˜¬ë°”ë¥¸ íŒ¨í„´**
> ```kotlin
> âŒ ì˜ëª»ëœ ì˜ˆ - provideContent ë‚´ë¶€ì—ì„œ ë„¤íŠ¸ì›Œí¬ í˜¸ì¶œ
> provideContent {
>     val data = runBlocking { fetchDataFromNetwork() } // âŒ ANR ìœ„í—˜!
>     Text(data)
> }
>
> âœ… ì˜¬ë°”ë¥¸ ì˜ˆ - Workerì—ì„œ ì¤€ë¹„ â†’ DataStore ì €ì¥ â†’ UIëŠ” ì½ê¸°ë§Œ
> // 1. Workerì—ì„œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
> class DataUpdateWorker : CoroutineWorker(...) {
>     override suspend fun doWork(): Result {
>         val data = repository.fetchData() // ë„¤íŠ¸ì›Œí¬ í˜¸ì¶œ
>
>         // DataStoreì— ì €ì¥
>         updateAppWidgetState(context, glanceId) { prefs ->
>             prefs[dataKey] = data
>         }
>
>         // UI ê°±ì‹  íŠ¸ë¦¬ê±°
>         MyWidget().update(context, glanceId)
>         return Result.success()
>     }
> }
>
> // 2. UIëŠ” currentState()ë¡œ ì½ê¸°ë§Œ
> provideContent {
>     val prefs = currentState<Preferences>()
>     val data = prefs[dataKey] ?: "ë¡œë”© ì¤‘..."
>     Text(data)
> }
> ```
>
> **ì •ë¦¬**: ë°ì´í„°ëŠ” Worker/Repositoryì—ì„œ ì¤€ë¹„ â†’ DataStoreì— ì €ì¥ â†’ UIëŠ” `currentState()`ë¡œ ì½ê¸°ë§Œ.

#### 3.4.3 ìµœì´ˆ ë¡œë”© UX ê¶Œì¥ íŒ¨í„´

ìœ„ì ¯ì´ ì²˜ìŒ ì¶”ê°€ë˜ì—ˆì„ ë•Œ ë°ì´í„°ê°€ ì—†ëŠ” ìƒíƒœë¥¼ ì²˜ë¦¬í•˜ëŠ” íŒ¨í„´ì…ë‹ˆë‹¤.

```kotlin
@Composable
fun WidgetContent() {
    val prefs = currentState<Preferences>()
    val data = prefs[stringPreferencesKey("weather_data")]
    val isLoading = prefs[booleanPreferencesKey("is_loading")] ?: false
    val errorMsg = prefs[stringPreferencesKey("error_message")]

    Column(
        modifier = GlanceModifier.fillMaxSize().padding(16.dp),
        verticalAlignment = Alignment.CenterVertically,
        horizontalAlignment = Alignment.CenterHorizontally
    ) {
        when {
            // 1. ì—ëŸ¬ ìƒíƒœ: ì¬ì‹œë„ ë²„íŠ¼ ì œê³µ
            errorMsg != null -> {
                Text("âš ï¸ $errorMsg", style = TextStyle(color = Color.Red))
                Spacer(GlanceModifier.height(8.dp))
                Button(
                    text = "ìƒˆë¡œê³ ì¹¨",
                    onClick = actionRunCallback<RefreshDataAction>()
                )
            }

            // 2. ë¡œë”© ì¤‘: ìŠ¤ì¼ˆë ˆí†¤/í”Œë ˆì´ìŠ¤í™€ë”
            isLoading -> {
                CircularProgressIndicator()
                Text("ë¡œë”© ì¤‘...", style = TextStyle(color = Color.Gray))
            }

            // 3. ë°ì´í„° ì—†ìŒ: ì´ˆê¸° ìƒíƒœ
            data == null -> {
                Text("ğŸ“Š ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ë ¤ë©´\nì•„ë˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”")
                Spacer(GlanceModifier.height(8.dp))
                Button(
                    text = "ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°",
                    onClick = actionRunCallback<LoadInitialDataAction>()
                )
            }

            // 4. ì •ìƒ ë°ì´í„° í‘œì‹œ
            else -> {
                Text(data)
                Button(
                    text = "ìƒˆë¡œê³ ì¹¨",
                    onClick = actionRunCallback<RefreshDataAction>()
                )
            }
        }
    }
}

// ActionCallback: Workerë¡œ ë°±ê·¸ë¼ìš´ë“œ ì‘ì—… ìœ„ì„
class LoadInitialDataAction : ActionCallback {
    override suspend fun onAction(
        context: Context,
        glanceId: GlanceId,
        parameters: ActionParameters
    ) {
        // ì¦‰ì‹œ ë¡œë”© ìƒíƒœ í‘œì‹œ
        updateAppWidgetState(context, glanceId) { prefs ->
            prefs[booleanPreferencesKey("is_loading")] = true
        }
        MyWidget().update(context, glanceId)

        // Workerë¡œ ì‹¤ì œ ë°ì´í„° ë¡œë“œ ì‘ì—… ìœ„ì„
        val workRequest = OneTimeWorkRequestBuilder<DataFetchWorker>()
            .setInputData(workDataOf("glance_id" to glanceId.toString()))
            .build()
        WorkManager.getInstance(context).enqueue(workRequest)
    }
}
```

**[ìŠ¤í¬ë¦°ìƒ· ì¶”ì²œ]** ìœ„ì ¯ ë¡œë”© â†’ ë°ì´í„° í‘œì‹œ â†’ ì—ëŸ¬ â†’ ì¬ì‹œë„ íë¦„

> [!NOTE] ğŸ’¬ ë°œí‘œ ì„¤ëª…
> "**ìµœì´ˆ ë¡œë”© UXëŠ” 4ê°€ì§€ ìƒíƒœ**ë¥¼ ì²˜ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤.
>
> 1. **ì—ëŸ¬ ìƒíƒœ**: ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ë“±ì˜ ë©”ì‹œì§€ì™€ 'ìƒˆë¡œê³ ì¹¨' ë²„íŠ¼
> 2. **ë¡œë”© ì¤‘**: ë¡œë”© ì¸ë””ì¼€ì´í„°ë‚˜ 'ë¡œë”© ì¤‘...' í…ìŠ¤íŠ¸
> 3. **ì´ˆê¸° ìƒíƒœ**: ë°ì´í„°ê°€ ì—†ì„ ë•Œ 'ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°' ë²„íŠ¼
> 4. **ì •ìƒ ìƒíƒœ**: ì‹¤ì œ ë°ì´í„° í‘œì‹œ
>
> **í•µì‹¬ íŒ¨í„´**:
> - ActionCallbackì—ì„œ ì¦‰ì‹œ ë¡œë”© ìƒíƒœë¡œ ë³€ê²½ â†’ `update()` í˜¸ì¶œ (ì‚¬ìš©ìì—ê²Œ í”¼ë“œë°±)
> - Workerë¥¼ enqueueí•´ì„œ ë°±ê·¸ë¼ìš´ë“œ ì‘ì—… ìœ„ì„
> - Workerê°€ ì™„ë£Œë˜ë©´ DataStore ì—…ë°ì´íŠ¸ â†’ `update()` í˜¸ì¶œ (ê²°ê³¼ ë°˜ì˜)
>
> ì´ë ‡ê²Œ í•˜ë©´ **UIëŠ” ì ˆëŒ€ ë¸”ë¡œí‚¹ë˜ì§€ ì•Šê³ **, ì‚¬ìš©ìëŠ” ë¡œë”© ìƒíƒœë¥¼ ëª…í™•íˆ ì¸ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."

**Worker êµ¬í˜„ ì˜ˆì‹œ**:
```kotlin
class DataFetchWorker(
    context: Context,
    params: WorkerParameters
) : CoroutineWorker(context, params) {
    override suspend fun doWork(): Result {
        val glanceIdString = inputData.getString("glance_id") ?: return Result.failure()
        val glanceId = GlanceId(glanceIdString)

        return try {
            // ë„¤íŠ¸ì›Œí¬/DBì—ì„œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° (ë¬´ê±°ìš´ I/O)
            val data = repository.fetchWeatherData()

            // DataStoreì— ì €ì¥
            updateAppWidgetState(applicationContext, glanceId) { prefs ->
                prefs[stringPreferencesKey("weather_data")] = data
                prefs[booleanPreferencesKey("is_loading")] = false
                prefs.remove(stringPreferencesKey("error_message"))
            }

            // UI ê°±ì‹ 
            MyWidget().update(applicationContext, glanceId)
            Result.success()

        } catch (e: Exception) {
            // ì—ëŸ¬ ìƒíƒœ ì €ì¥
            updateAppWidgetState(applicationContext, glanceId) { prefs ->
                prefs[booleanPreferencesKey("is_loading")] = false
                prefs[stringPreferencesKey("error_message")] = e.message ?: "ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜"
            }
            MyWidget().update(applicationContext, glanceId)
            Result.failure()
        }
    }
}
```

**Worker ê´€ë ¨ ìì„¸í•œ ë‚´ìš©ì€ â†’ [5. Glance ìƒëª…ì£¼ê¸° & ì—…ë°ì´íŠ¸ íŠ¸ë¦¬ê±°â­](5.%20Glance%20ìƒëª…ì£¼ê¸°%20&%20ì—…ë°ì´íŠ¸%20íŠ¸ë¦¬ê±°â­.md)** ì°¸ê³ 

---

## 4. UI ì‘ì„± ê·œì¹™

### 4.1 ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸

**ë ˆì´ì•„ì›ƒ**
- `Column`: ì„¸ë¡œ ë°°ì¹˜
- `Row`: ê°€ë¡œ ë°°ì¹˜
- `Box`: ê²¹ì³ì„œ ë°°ì¹˜
- `Spacer`: ë¹ˆ ê³µê°„
- `LazyColumn`: ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•œ ë¦¬ìŠ¤íŠ¸ (ì œí•œì )

**UI ìš”ì†Œ**
- `Text`: í…ìŠ¤íŠ¸
- `Image`: ì´ë¯¸ì§€
- `Button`: ë²„íŠ¼
- `CheckBox`: ì²´í¬ë°•ìŠ¤
- `Switch`: ìŠ¤ìœ„ì¹˜
- `RadioButton`: ë¼ë””ì˜¤ ë²„íŠ¼

**UI ì‘ì„± ê·œì¹™ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ â†’ [6. UI ì‘ì„± ê·œì¹™ ë° ì œì•½ì‚¬í•­â­](6.%20UI%20ì‘ì„±%20ê·œì¹™%20ë°%20ì œì•½ì‚¬í•­â­.md)** ì°¸ê³ 

---

### 4.2 ë‹¨ìœ„ ì‚¬ìš©

Glanceì—ì„œëŠ” **`androidx.glance.unit.dp`**ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤ (Composeì˜ `dp`ì™€ ë‹¤ë¦„).

```kotlin
import androidx.glance.unit.dp  // âœ… Glanceì˜ dp

// âŒ ì˜ëª»ëœ ì˜ˆ
import androidx.compose.ui.unit.dp  // Composeì˜ dp (Glanceì—ì„œ ì‚¬ìš© ë¶ˆê°€)
```

---

### 4.3 ìƒíƒœ ì ‘ê·¼

`currentState<T>()`ë¡œ í˜„ì¬ ìœ„ì ¯ì˜ ìƒíƒœë¥¼ ì½ìŠµë‹ˆë‹¤.

```kotlin
@Composable
fun WidgetContent() {
    val prefs = currentState<Preferences>()
    val count = prefs[intPreferencesKey("count")] ?: 0

    Text("Count: $count")
}
```

---

## 5. RemoteViews ì œì•½ (Composeì™€ ë‹¤ë¦„)

GlanceëŠ” `RemoteViews` ê¸°ë°˜ì´ë¯€ë¡œ ë‹¤ìŒê³¼ ê°™ì€ ì œì•½ì´ ìˆìŠµë‹ˆë‹¤:

- âŒ `remember`, `LaunchedEffect` ë“± Compose ëŸ°íƒ€ì„ API ì‚¬ìš© ë¶ˆê°€
- âŒ ì• ë‹ˆë©”ì´ì…˜ ì œí•œ
- âŒ Coil/Glide ì§ì ‘ ì‚¬ìš© ë¶ˆê°€

```kotlin
// âŒ ì‚¬ìš© ë¶ˆê°€
var count by remember { mutableStateOf(0) }

// âœ… ëŒ€ì‹  StateDefinition ì‚¬ìš©
val prefs = currentState<Preferences>()
val count = prefs[intPreferencesKey("count")] ?: 0
```

**RemoteViews ì œì•½ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ â†’ [6. UI ì‘ì„± ê·œì¹™ ë° ì œì•½ì‚¬í•­â­](6.%20UI%20ì‘ì„±%20ê·œì¹™%20ë°%20ì œì•½ì‚¬í•­â­.md)** ì°¸ê³ 

---

## 6. ì‹¤ì „ ì˜ˆì œ ì°¸ê³ 

GlanceAppWidgetì˜ ì‹¤ì „ í™œìš© ì˜ˆì œëŠ” ë‹¤ìŒ ì±•í„°ì—ì„œ ìì„¸íˆ ë‹¤ë£¹ë‹ˆë‹¤:

- **ë‚ ì”¨ ìœ„ì ¯** (ìƒíƒœ ê´€ë¦¬, í¬ê¸° ëŒ€ì‘, ì‚¬ìš©ì ì¸í„°ë™ì…˜ ì¢…í•©): **[10. State ê´€ë¦¬â­â­](10.%20State%20ê´€ë¦¬â­â­.md)** ì„¹ì…˜ 8 ì°¸ê³ 
- **Todo ìœ„ì ¯** (ë³µì¡í•œ ìƒíƒœ, ë¦¬ìŠ¤íŠ¸ ê´€ë¦¬, ë‹¤ì¤‘ ì•¡ì…˜): **[8. Action(ì´ë²¤íŠ¸) ì²˜ë¦¬ ë°©ì‹â­â­](8.%20Action(ì´ë²¤íŠ¸)%20ì²˜ë¦¬%20ë°©ì‹â­â­.md)** ì„¹ì…˜ 6 ì°¸ê³ 

ì´ ì˜ˆì œë“¤ì€ `GlanceAppWidget`ì˜ ëª¨ë“  í•µì‹¬ ìš”ì†Œë¥¼ ì¢…í•©ì ìœ¼ë¡œ ë³´ì—¬ì¤ë‹ˆë‹¤:
- `stateDefinition`: ìœ„ì ¯ ìƒíƒœ ì €ì¥ ë°©ì‹
- `sizeMode`: ë°˜ì‘í˜• í¬ê¸° ëŒ€ì‘
- `provideGlance()`: UI ì œê³µ ë° ë°ì´í„° ë¡œë“œ
- `currentState()`: ìƒíƒœ ì½ê¸° ë° UI ë°˜ì˜
- `ActionCallback`: ì‚¬ìš©ì ì¸í„°ë™ì…˜ ì²˜ë¦¬

---

## 7. initialLayout í”Œë ˆì´ìŠ¤í™€ë” (í•„ìˆ˜ ì„¤ì •)

ìœ„ì ¯ì„ ì¶”ê°€í•  ë•Œ Glanceê°€ ì‹¤ì œ UIë¥¼ ë Œë”ë§í•˜ê¸° ì „ê¹Œì§€ **ì„ì‹œë¡œ ë³´ì—¬ì¤„ ë ˆì´ì•„ì›ƒ**ì„ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤.

### 7.1 í”Œë ˆì´ìŠ¤í™€ë” ì„¤ì •

```xml
<!-- res/xml/widget_info.xml -->
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
    android:initialLayout="@layout/widget_placeholder"  <!-- í•„ìˆ˜! -->
    android:minWidth="180dp"
    android:minHeight="110dp"
    android:previewImage="@drawable/widget_preview"
    android:resizeMode="horizontal|vertical"
    android:widgetCategory="home_screen" />
```

```xml
<!-- res/layout/widget_placeholder.xml -->
<TextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:text="Loading..."
    android:gravity="center"
    android:textColor="#666666"
    android:background="#FFFFFF" />
```

> [!NOTE] ğŸ’¬ ë°œí‘œ ì„¤ëª…
> "`initialLayout`ì€ **í•„ìˆ˜ ì„¤ì •**ì…ë‹ˆë‹¤. ì´ ë¦¬ì†ŒìŠ¤ê°€ ì—†ìœ¼ë©´ ìœ„ì ¯ì´ ìœ„ì ¯ ì„ íƒ í™”ë©´ì— ì•„ì˜ˆ ì•ˆ ë‚˜íƒ€ë‚  ìˆ˜ ìˆì–´ìš”.
>
> ì‚¬ìš©ìê°€ ìœ„ì ¯ì„ ì¶”ê°€í•˜ëŠ” ìˆœê°„, Glanceê°€ `provideGlance()`ë¥¼ ì‹¤í–‰í•´ì„œ ì‹¤ì œ UIë¥¼ ë§Œë“¤ê¸° ì „ê¹Œì§€ ì ê¹ ë³´ì—¬ì¤„ ì„ì‹œ í™”ë©´ì…ë‹ˆë‹¤. 'Loading...' ê°™ì€ ë‹¨ìˆœí•œ í…ìŠ¤íŠ¸ë‚˜ ë¡œê³  ì •ë„ë©´ ì¶©ë¶„í•©ë‹ˆë‹¤.
>
> ì‹¤ì œë¡œëŠ” ëª‡ ë°€ë¦¬ì´ˆ~1ì´ˆ ì •ë„ë§Œ ë³´ì´ì§€ë§Œ, ì´ íŒŒì¼ ìì²´ê°€ ì—†ìœ¼ë©´ ì‹œìŠ¤í…œì´ ìœ„ì ¯ì„ ì¸ì‹í•˜ì§€ ëª»í•©ë‹ˆë‹¤."

### 7.2 ì£¼ì˜ì‚¬í•­

- âœ… **ë°˜ë“œì‹œ ìƒì„±**: XML ë ˆì´ì•„ì›ƒ íŒŒì¼ì´ ì‹¤ì œë¡œ ì¡´ì¬í•´ì•¼ í•¨
- âœ… **ë‹¨ìˆœí•˜ê²Œ**: TextView í•˜ë‚˜ ì •ë„ë¡œ ì¶©ë¶„
- âœ… **ë¹ ë¥¸ ë¡œë”©**: ë¬´ê±°ìš´ ë ˆì´ì•„ì›ƒ í”¼í•˜ê¸°
- âš ï¸ **ë¯¸ë…¸ì¶œ ìœ„í—˜**: ì—†ìœ¼ë©´ ìœ„ì ¯ ëª©ë¡ì— ì•ˆ ëœ° ìˆ˜ ìˆìŒ

---

## 8. Glance ë™ì‘ ì›ë¦¬

### 8.1 ë Œë”ë§ íë¦„

```
ğŸ“± ì‚¬ìš©ìê°€ ìœ„ì ¯ ì¶”ê°€
   â†“
ğŸ“‘ initialLayout ì¦‰ì‹œ í‘œì‹œ (í”Œë ˆì´ìŠ¤í™€ë”)
   â†“
ğŸ“¡ GlanceAppWidgetReceiver í˜¸ì¶œ
   â†“
ğŸ§© provideGlance() ì‹¤í–‰
   â†“
ğŸ¨ provideContent { } - Glance DSL ì‘ì„±
   â†“
ğŸ”„ Glance ì—”ì§„ì´ ìë™ìœ¼ë¡œ RemoteViews ë³€í™˜
   â†“
âœ… ì‹¤ì œ ìœ„ì ¯ UI í‘œì‹œ
```

### 8.2 í•µì‹¬ í¬ì¸íŠ¸

- **ì„ ì–¸í˜• UI**: ê°œë°œìëŠ” DSLë§Œ ì‘ì„±
- **ìë™ ë³€í™˜**: Glanceê°€ RemoteViewsë¡œ ë³€í™˜
- **RemoteViews ê¸°ë°˜**: ë”°ë¼ì„œ ì œì•½ì‚¬í•­ ì¡´ì¬ (â†’ [6. UI ì‘ì„± ê·œì¹™](4.ì„¸ë¯¸ë‚˜/Glance/6.%20UI%20ì‘ì„±%20ê·œì¹™%20ë°%20ì œì•½ì‚¬í•­â­â­.md) ì°¸ê³ )

---

## 9. ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] `GlanceAppWidget` ìƒì†í•œ í´ë˜ìŠ¤ ì‘ì„±
- [ ] `stateDefinition` ì •ì˜ (Preferences ë˜ëŠ” Proto)
- [ ] `sizeMode` ì •ì˜ (ëŒ€ë¶€ë¶„ Responsive ê¶Œì¥)
- [ ] `provideGlance()` êµ¬í˜„
- [ ] `provideContent {}` ë‚´ë¶€ì— Glance Composable ì‘ì„±
- [ ] **`initialLayout` XML íŒŒì¼ ìƒì„±** (í•„ìˆ˜!)
- [ ] Glanceì˜ `dp` ì‚¬ìš© í™•ì¸ (`androidx.glance.unit.dp`)
- [ ] Compose ëŸ°íƒ€ì„ API ì‚¬ìš©í•˜ì§€ ì•Šì•˜ëŠ”ì§€ í™•ì¸
- [ ] `currentState<T>()`ë¡œ ìƒíƒœ ì ‘ê·¼

---

---
