> [!TIP] 🗣️ 핵심내용
Jetpack Glance는 Jetpack Compose 스타일로 Android 위젯을 개발할 수 있는 라이브러리입니다. 선언형 UI로 위젯을 더 쉽게 만들어보세요.
>

## 1. Glance란?

Jetpack Glance는 Android 홈 화면 위젯을 **Compose 스타일의 선언형 DSL**로 작성할 수 있게 해주는 라이브러리입니다.

### 1.1 핵심 특징
- **선언형 UI**: XML이 아닌 Kotlin 코드로 UI 작성
- **RemoteViews 추상화**: 복잡한 RemoteViews API를 Compose 스타일로 간소화
- **DataStore 통합**: PreferencesGlanceStateDefinition으로 쉬운 상태 관리
- **Material3 지원**: 일관된 디자인 시스템

> [!NOTE] 💬 발표 설명
> "Glance의 가장 큰 특징은 **선언형 UI**입니다. 기존에는 XML로 레이아웃을 만들고 RemoteViews로 하나하나 조작해야 했지만, Glance는 Compose처럼 Kotlin 코드로 직접 UI를 선언합니다.
>
> **RemoteViews 추상화**는 개발자가 복잡한 RemoteViews API를 직접 다룰 필요가 없다는 뜻입니다. Glance가 내부적으로 자동 변환해주죠.
>
> **DataStore 통합**으로 위젯 상태 관리가 훨씬 쉬워졌습니다. SharedPreferences를 수동으로 관리할 필요 없이, StateDefinition만 지정하면 인스턴스별 상태가 자동으로 분리됩니다."

### 1.2 전통 위젯과의 차이

| 항목    | 전통 위젯                     | Glance 위젯                                                                                    |
| ----- | ------------------------- | -------------------------------------------------------------------------------------------- |
| UI 작성 | XML + RemoteViews         | Compose DSL                                                                                  |
| 상태 관리 | 직접 구현 (SharedPreferences) | DataStore 기반 StateDefinition → **[10. State 관리⭐](10.%20State%20관리⭐.md)** 참고                    |
| 업데이트  | onUpdate() 콜백             | update() / updateAll() → **[5. 생명주기 & 업데이트 트리거](5.%20Glance%20생명주기%20&%20업데이트%20트리거⭐.md)** 참고 |
| 개발 경험 | 보일러플레이트 많음                | 간결하고 직관적                                                                                     |
|       |                           |                                                                                              |

**[스크린샷 추천]** 전통 위젯 코드 vs Glance 위젯 코드 비교

---

## 2. Glance 위젯 구조

```
📦 Glance 위젯 구성요소
├─ 📡 GlanceAppWidgetReceiver → [2. GlanceAppWidgetReceiver](2.%20GlanceAppWidgetReceiver.md)
│   └─ 시스템 브로드캐스트 수신 (진입점)
│
├─ 🧩 GlanceAppWidget → [4. GlanceAppWidget](4.%20GlanceAppWidget.md)
│   ├─ stateDefinition → [10. State 관리](10.%20State%20관리.md)
│   ├─ sizeMode → [7. SizeMode](7.%20SizeMode.md)
│   └─ provideGlance() (UI 제공)
│
├─ 🎨 Composable UI → [6. UI 작성 규칙](6.%20UI%20작성%20규칙%20및%20제약사항.md)
│   ├─ Column, Row, Box
│   ├─ Text, Image, Button
│   └─ currentState() (상태 읽기)
│
└─ 🔄 ActionCallback → [8. Action 처리 방식](8.%20Action(이벤트)%20처리%20방식.md)
    └─ 사용자 인터랙션 처리
```

> [!NOTE] 💬 발표 설명
> "Glance 위젯은 크게 4가지 요소로 구성됩니다.
>
> 1. **GlanceAppWidgetReceiver**: 시스템의 진입점입니다. 런처나 OS가 보내는 브로드캐스트를 받아서 위젯을 깨웁니다.
>
> 2. **GlanceAppWidget**: 위젯의 핵심 클래스입니다. 여기서 상태 관리 방식(stateDefinition), 크기 전략(sizeMode), 그리고 실제 UI(provideGlance)를 정의합니다.
>
> 3. **Composable UI**: Compose 스타일의 선언형 UI입니다. Column, Row, Text, Button 같은 익숙한 컴포넌트를 사용하고, currentState()로 상태를 읽어옵니다.
>
> 4. **ActionCallback**: 버튼 클릭 같은 사용자 이벤트를 처리합니다. 여기서 상태를 변경하고 위젯을 업데이트합니다."

---

## 3. 최소 구현 예제

```kotlin
// 1. Receiver 정의
class SimpleWidgetReceiver : GlanceAppWidgetReceiver() {
    override val glanceAppWidget: GlanceAppWidget = SimpleWidget()
}

// 2. Widget 구현
class SimpleWidget : GlanceAppWidget() {
    override suspend fun provideGlance(context: Context, id: GlanceId) {
        provideContent {
            Column(
                modifier = GlanceModifier
                    .fillMaxSize()
                    .padding(16.dp)
                    .background(Color.White),
                verticalAlignment = Alignment.CenterVertically,
                horizontalAlignment = Alignment.CenterHorizontally
            ) {
                Text(
                    text = "Hello, Glance!",
                    style = TextStyle(fontSize = 20.sp, fontWeight = FontWeight.Bold)
                )
            }
        }
    }
}
```

```xml
<!-- 3. AndroidManifest.xml 등록 -->
<receiver
    android:name=".SimpleWidgetReceiver"
    android:exported="true">
    <intent-filter>
        <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
    </intent-filter>
    <meta-data
        android:name="android.appwidget.provider"
        android:resource="@xml/simple_widget_info" />
</receiver>
```

```xml
<!-- 4. res/xml/simple_widget_info.xml -->
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
    android:initialLayout="@layout/placeholder"
    android:minWidth="180dp"
    android:minHeight="110dp"
    android:resizeMode="horizontal|vertical"
    android:widgetCategory="home_screen" />
```

```xml
<!-- 5. res/layout/placeholder.xml -->
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:text="Loading..."
    android:gravity="center"
    android:background="#FFFFFF" />
```

**[스크린샷 추천]** 홈 화면에 표시된 "Hello, Glance!" 위젯

> [!NOTE] 💬 발표 설명
> "이 최소 구현 예제를 보면 Glance 위젯이 얼마나 간단한지 알 수 있습니다.
>
> 1. **Receiver 정의**: GlanceAppWidgetReceiver를 상속하고 위젯 클래스만 연결합니다.
>
> 2. **Widget 구현**: provideContent 블록 안에 Compose 스타일로 UI를 선언합니다. Column으로 세로 배치, Text로 텍스트 표시, 이게 전부입니다.
>
> 3. **Manifest 등록**: 일반 BroadcastReceiver처럼 등록하고, AppWidgetProviderInfo XML을 연결합니다.
>
> 4. **ProviderInfo XML**: 위젯의 기본 정보(크기, 카테고리)를 정의합니다. initialLayout은 플레이스홀더로 사용됩니다.
>
> 5. **플레이스홀더 레이아웃**: 위젯이 로드되기 전 잠깐 보이는 간단한 레이아웃입니다. 'Loading...' 같은 단순한 텍스트면 충분합니다.
>
> 이렇게 5가지 파일만 있으면 기본 위젯이 완성됩니다."

---
