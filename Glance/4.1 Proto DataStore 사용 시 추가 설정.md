
## Proto DataStore 사용 시 추가 설정

> [!NOTE]
> "**Proto DataStore는 Glance 전용이 아닙니다**. 일반 Android 앱에서도 사용하는 Jetpack DataStore의 한 종류입니다.
>
> - **Preferences DataStore**: 간단한 key-value 저장 (Int, String, Boolean 등)
> - **Proto DataStore**: 복잡한 데이터 구조를 Protocol Buffers로 저장 (중첩 객체, 리스트 등)
>
> Glance 위젯에서는 **위젯 상태가 복잡할 때** Proto DataStore를 선택할 수 있습니다. 예를 들어:
> - Todo 리스트 (각 항목이 제목, 완료 여부, 우선순위 등의 필드를 가짐)
> - 날씨 정보 (온도, 습도, 풍속, 예보 리스트 등)
> - 설정 정보 (여러 카테고리와 하위 옵션들)
>
> 일반 앱에서도 동일한 목적으로 사용됩니다. Glance만의 기능이 아니라 **Android 전반에서 쓰는 데이터 저장 방식**입니다."

복잡한 데이터 구조를 다룰 때는 Protocol Buffers를 사용할 수 있습니다.

### Protobuf 플러그인 추가

```kotlin
// 모듈 레벨 build.gradle.kts
plugins {
    id("com.android.application")
    id("org.jetbrains.kotlin.android")
    id("com.google.protobuf") version "0.9.4"  // 추가
}

dependencies {
    // Proto DataStore
    implementation("androidx.datastore:datastore:1.0.0")
    implementation("com.google.protobuf:protobuf-javalite:3.21.12")
}

protobuf {
    protoc {
        artifact = "com.google.protobuf:protoc:3.21.12"
    }
    generateProtoTasks {
        all().forEach { task ->
            task.builtins {
                create("java") {
                    option("lite")
                }
            }
        }
    }
}
```

### Proto 파일 위치

```
app/
└── src/
    └── main/
        ├── proto/
        │   └── widget_state.proto  ← 여기에 .proto 파일 생성
        └── java/
```

**[스크린샷 추천]** Android Studio 프로젝트 구조에서 proto 폴더 위치